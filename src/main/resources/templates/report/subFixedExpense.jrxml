<!-- Created with Jaspersoft Studio version 7.0.0.final using JasperReports Library version 7.0.0-b478feaa9aab4375eba71de77b4ca138ad2f62aa  -->
<jasperReport name="subFixedExpense" language="java" pageWidth="555" pageHeight="802" columnWidth="555" leftMargin="0"
              rightMargin="0" topMargin="0" bottomMargin="0" uuid="fa88872d-98de-49de-8c62-05a81d9857df">
    <property name="com.jaspersoft.studio.data.sql.tables" value=""/>
    <property name="com.jaspersoft.studio.data.defaultdataadapter" value="WALLETWISE-DATABASE-STAGING"/>
    <style name="Table_TH" mode="Opaque" backcolor="#696969">
        <box>
            <topPen lineWidth="0.5" lineColor="#000000"/>
            <bottomPen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="Table_CH" mode="Opaque" backcolor="#FFBFBF">
        <box>
            <topPen lineWidth="0.5" lineColor="#000000"/>
            <bottomPen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="Table_TD" mode="Opaque" backcolor="#FFFFFF">
        <box>
            <topPen lineWidth="0.5" lineColor="#000000"/>
            <bottomPen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <dataset name="FixedExpenses" uuid="32e02016-728e-44b9-9676-e96356cdc484">
        <property name="com.jaspersoft.studio.data.sql.tables"
                  value="dF9leHBlbnNlIEFTICw2Niw3NCwzYTI2NTMyZC0wOGVmLTRkNmMtOTUwNS1iZDNmMWViYmQwMmI7"/>
        <property name="com.jaspersoft.studio.data.defaultdataadapter" value="WALLETWISE-DATABASE-STAGING"/>
        <query language="SQL"><![CDATA[SELECT amount,
	category,
	due_day,
	payment_frequency,
	end_date,
	start_date
FROM t_expense]]></query>
        <field name="amount" class="java.lang.Double">
            <property name="com.jaspersoft.studio.field.name" value="amount"/>
            <property name="com.jaspersoft.studio.field.label" value="amount"/>
            <property name="com.jaspersoft.studio.field.tree.path" value="t_expense"/>
        </field>
        <field name="category" class="java.lang.String">
            <property name="com.jaspersoft.studio.field.name" value="category"/>
            <property name="com.jaspersoft.studio.field.label" value="category"/>
            <property name="com.jaspersoft.studio.field.tree.path" value="t_expense"/>
        </field>
        <field name="due_day" class="java.lang.Integer">
            <property name="com.jaspersoft.studio.field.name" value="due_day"/>
            <property name="com.jaspersoft.studio.field.label" value="due_day"/>
            <property name="com.jaspersoft.studio.field.tree.path" value="t_expense"/>
        </field>
        <field name="payment_frequency" class="java.lang.String">
            <property name="com.jaspersoft.studio.field.name" value="payment_frequency"/>
            <property name="com.jaspersoft.studio.field.label" value="payment_frequency"/>
            <property name="com.jaspersoft.studio.field.tree.path" value="t_expense"/>
        </field>
        <field name="end_date" class="java.sql.Timestamp">
            <property name="com.jaspersoft.studio.field.name" value="end_date"/>
            <property name="com.jaspersoft.studio.field.label" value="end_date"/>
            <property name="com.jaspersoft.studio.field.tree.path" value="t_expense"/>
        </field>
        <field name="start_date" class="java.sql.Timestamp">
            <property name="com.jaspersoft.studio.field.name" value="start_date"/>
            <property name="com.jaspersoft.studio.field.label" value="start_date"/>
            <property name="com.jaspersoft.studio.field.tree.path" value="t_expense"/>
        </field>
    </dataset>
    <parameter name="USER_ID" class="java.lang.String"/>
    <parameter name="CURRENCY" class="java.lang.String"/>
    <query language="SQL"><![CDATA[SELECT
    fex.id,
    fex.description,
    fex.category,
    fex.amount,
    fex.due_day,
    fex.payment_frequency,
    fex.start_date,
    fex.end_date,
    fex.expense_type,
    TO_CHAR(fex.amount, 'L 9G999G999G999D99') AS formatted_amount,
    TO_CHAR(
            (CASE
                 WHEN DATE_PART('year', AGE(fex.end_date, fex.start_date)) * 12 +
                      DATE_PART('month', AGE(fex.end_date, fex.start_date)) = 0
                     THEN 1
                 ELSE DATE_PART('year', AGE(fex.end_date, fex.start_date)) * 12 +
                      DATE_PART('month', AGE(fex.end_date, fex.start_date))
                END) * fex.amount, 'L 9G999G999G999D99') AS subtotal,
    TO_CHAR(
            (SELECT SUM(
                            (CASE
                                 WHEN DATE_PART('year', AGE(fex_sub.end_date, fex_sub.start_date)) * 12 +
                                      DATE_PART('month', AGE(fex_sub.end_date, fex_sub.start_date)) = 0
                                     THEN 1
                                 ELSE DATE_PART('year', AGE(fex_sub.end_date, fex_sub.start_date)) * 12 +
                                      DATE_PART('month', AGE(fex_sub.end_date, fex_sub.start_date))
                                END) * fex_sub.amount)
             FROM t_expense fex_sub
             WHERE fex_sub.active = true
               AND fex_sub.user_id = fex.user_id), 'L 9G999G999G999D99') AS totalAmount
FROM t_expense fex
WHERE
    fex.active = true
  AND fex.user_id =  CAST($P{USER_ID} AS UUID)
]]></query>
    <field name="id" class="java.util.UUID">
        <property name="com.jaspersoft.studio.field.name" value="id"/>
        <property name="com.jaspersoft.studio.field.label" value="id"/>
        <property name="com.jaspersoft.studio.field.tree.path" value="t_expense"/>
    </field>
    <field name="description" class="java.lang.String">
        <property name="com.jaspersoft.studio.field.name" value="description"/>
        <property name="com.jaspersoft.studio.field.label" value="description"/>
        <property name="com.jaspersoft.studio.field.tree.path" value="t_expense"/>
    </field>
    <field name="category" class="java.lang.String">
        <property name="com.jaspersoft.studio.field.name" value="category"/>
        <property name="com.jaspersoft.studio.field.label" value="category"/>
        <property name="com.jaspersoft.studio.field.tree.path" value="t_expense"/>
    </field>
    <field name="amount" class="java.lang.Double">
        <property name="com.jaspersoft.studio.field.name" value="amount"/>
        <property name="com.jaspersoft.studio.field.label" value="amount"/>
        <property name="com.jaspersoft.studio.field.tree.path" value="t_expense"/>
    </field>
    <field name="due_day" class="java.lang.Integer">
        <property name="com.jaspersoft.studio.field.name" value="due_day"/>
        <property name="com.jaspersoft.studio.field.label" value="due_day"/>
        <property name="com.jaspersoft.studio.field.tree.path" value="t_expense"/>
    </field>
    <field name="payment_frequency" class="java.lang.String">
        <property name="com.jaspersoft.studio.field.name" value="payment_frequency"/>
        <property name="com.jaspersoft.studio.field.label" value="payment_frequency"/>
        <property name="com.jaspersoft.studio.field.tree.path" value="t_expense"/>
    </field>
    <field name="start_date" class="java.sql.Timestamp">
        <property name="com.jaspersoft.studio.field.name" value="start_date"/>
        <property name="com.jaspersoft.studio.field.label" value="start_date"/>
        <property name="com.jaspersoft.studio.field.tree.path" value="t_expense"/>
    </field>
    <field name="end_date" class="java.sql.Timestamp">
        <property name="com.jaspersoft.studio.field.name" value="end_date"/>
        <property name="com.jaspersoft.studio.field.label" value="end_date"/>
        <property name="com.jaspersoft.studio.field.tree.path" value="t_expense"/>
    </field>
    <field name="expense_type" class="java.lang.String">
        <property name="com.jaspersoft.studio.field.name" value="expense_type"/>
        <property name="com.jaspersoft.studio.field.label" value="expense_type"/>
        <property name="com.jaspersoft.studio.field.tree.path" value="t_expense"/>
    </field>
    <field name="formatted_amount" class="java.lang.String">
        <property name="com.jaspersoft.studio.field.name" value="formatted_amount"/>
        <property name="com.jaspersoft.studio.field.label" value="formatted_amount"/>
    </field>
    <field name="subtotal" class="java.lang.String">
        <property name="com.jaspersoft.studio.field.name" value="subtotal"/>
        <property name="com.jaspersoft.studio.field.label" value="subtotal"/>
    </field>
    <field name="totalamount" class="java.lang.String">
        <property name="com.jaspersoft.studio.field.name" value="totalamount"/>
        <property name="com.jaspersoft.studio.field.label" value="totalamount"/>
    </field>
    <group name="amount">
        <expression><![CDATA[$F{amount}]]></expression>
    </group>
    <group name="category">
        <expression><![CDATA[$F{category}]]></expression>
    </group>
    <group name="description">
        <expression><![CDATA[$F{description}]]></expression>
    </group>
    <group name="due_day">
        <expression><![CDATA[$F{due_day}]]></expression>
    </group>
    <group name="payment_frequency">
        <expression><![CDATA[$F{payment_frequency}]]></expression>
    </group>
    <group name="end_date">
        <expression><![CDATA[$F{end_date}]]></expression>
    </group>
    <group name="start_date">
        <expression><![CDATA[$F{start_date}]]></expression>
    </group>
    <background splitType="Stretch"/>
    <detail>
        <band height="122" splitType="Stretch">
            <element kind="textField" uuid="894d68a5-adf6-4f1d-a46e-1a5b8ea53c1a" mode="Opaque" x="70" y="27"
                     width="475" height="21" backcolor="#75727C" bold="false" vTextAlign="Middle">
                <expression><![CDATA[$F{description}]]></expression>
            </element>
            <element kind="staticText" uuid="7299381b-8dca-4288-a42b-39a7281379ba" mode="Opaque" x="0" y="27" width="70"
                     height="21" backcolor="#75727C" bold="true" hTextAlign="Center" vTextAlign="Middle">
                <text><![CDATA[Description :]]></text>
            </element>
            <element kind="staticText" uuid="7f4a471f-eb62-4b8b-be08-da1d4f23592d" mode="Transparent" x="0" y="50"
                     width="140" height="21" backcolor="#75727C" bold="true" hTextAlign="Center" vTextAlign="Middle">
                <text><![CDATA[Category]]></text>
                <box leftPadding="1" rightPadding="1">
                    <topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
            </element>
            <element kind="staticText" uuid="30fa8db4-5d65-49fa-a5f9-cf82947b0e5f" mode="Transparent" x="140" y="50"
                     width="96" height="21" backcolor="#75727C" bold="true" hTextAlign="Center" vTextAlign="Middle">
                <text><![CDATA[Amount]]></text>
                <box leftPadding="1" rightPadding="1">
                    <topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
            </element>
            <element kind="staticText" uuid="21a48562-9149-41ac-9f71-bd1ba29c8d2f" mode="Transparent" x="236" y="50"
                     width="72" height="21" backcolor="#75727C" bold="true" hTextAlign="Center" vTextAlign="Middle">
                <text><![CDATA[Due Day]]></text>
                <box leftPadding="1" rightPadding="1">
                    <topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
            </element>
            <element kind="staticText" uuid="c555e1f0-b728-486e-8bd5-a404e1f126fc" mode="Transparent" x="308" y="50"
                     width="104" height="21" backcolor="#75727C" bold="true" hTextAlign="Center" vTextAlign="Middle">
                <text><![CDATA[Payment Frequency]]></text>
                <box leftPadding="1" rightPadding="1">
                    <topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
            </element>
            <element kind="staticText" uuid="580b3174-d799-4608-a284-f2a7ad9f1663" mode="Transparent" x="478" y="50"
                     width="66" height="21" backcolor="#75727C" bold="true" hTextAlign="Center" vTextAlign="Middle">
                <text><![CDATA[End Date]]></text>
                <box topPadding="1" bottomPadding="1" rightPadding="0">
                    <pen lineWidth="0.0"/>
                    <topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
            </element>
            <element kind="staticText" uuid="8fff032b-5728-4cd8-83bc-c91bc72b9443" mode="Transparent" x="412" y="50"
                     width="66" height="21" backcolor="#75727C" bold="true" hTextAlign="Center" vTextAlign="Middle">
                <text><![CDATA[Start Date]]></text>
                <box leftPadding="1" rightPadding="1">
                    <topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
            </element>
            <element kind="textField" uuid="6e28cce6-7f61-4d54-9871-56befa76db2f" x="0" y="71" width="140" height="24"
                     hTextAlign="Center" vTextAlign="Middle">
                <expression><![CDATA[$F{category}]]></expression>
                <box>
                    <topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
            </element>
            <element kind="textField" uuid="1f2eb012-d67b-4ec1-be45-267567e8ab07" x="140" y="71" width="96" height="24"
                     hTextAlign="Center" vTextAlign="Middle">
                <expression><![CDATA[$P{CURRENCY}+" "+$F{amount}]]></expression>
                <box>
                    <topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
            </element>
            <element kind="textField" uuid="b4e7d03c-1559-49d9-ba93-62db786c7f55" x="236" y="71" width="72" height="24"
                     hTextAlign="Center" vTextAlign="Middle">
                <expression><![CDATA[$F{due_day}]]></expression>
                <box>
                    <topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
            </element>
            <element kind="textField" uuid="02918319-def4-43c7-a12c-a8ebcdb3812a" x="308" y="71" width="104" height="24"
                     hTextAlign="Center" vTextAlign="Middle">
                <expression><![CDATA[$F{payment_frequency}]]></expression>
                <box>
                    <topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
            </element>
            <element kind="textField" uuid="d9319d58-73e9-4e19-bb46-8268b5b90978" x="412" y="71" width="66" height="24"
                     hTextAlign="Center" vTextAlign="Middle">
                <expression><![CDATA[$F{start_date}]]></expression>
                <box>
                    <topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
            </element>
            <element kind="textField" uuid="26c1f333-ccc0-448e-b1ab-14eeca29652b" x="478" y="71" width="66" height="24"
                     hTextAlign="Center" vTextAlign="Middle">
                <expression><![CDATA[$F{end_date}]]></expression>
                <box>
                    <topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
            </element>
            <element kind="staticText" uuid="38408144-ccca-40df-af7e-a1cdfaefd825" mode="Opaque" x="350" y="5"
                     width="80" height="18" backcolor="#9155FD" bold="true" vTextAlign="Middle">
                <text><![CDATA[Expense Type:]]></text>
            </element>
            <element kind="textField" uuid="23eae0f4-6542-4e95-8911-fbaa55d8e8ab" mode="Opaque" x="40" y="5" width="310"
                     height="18" backcolor="#9155FD" vTextAlign="Middle">
                <expression><![CDATA[$F{id}]]></expression>
                <property name="com.jaspersoft.studio.spreadsheet.connectionID"
                          value="b5caa75b-bb33-41ec-b540-341665809be1"/>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
            </element>
            <element kind="textField" uuid="1b70da94-3c74-4e44-b376-142ab0e81e19" mode="Opaque" x="430" y="5"
                     width="114" height="18" backcolor="#9155FD" vTextAlign="Middle">
                <expression><![CDATA[$F{expense_type}]]></expression>
                <property name="com.jaspersoft.studio.spreadsheet.connectionID"
                          value="88e9ddd0-b4a2-4953-99f1-fa62f6750013"/>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
            </element>
            <element kind="staticText" uuid="bec062a6-e928-4552-9003-2edfe6523cea" mode="Opaque" x="0" y="5" width="40"
                     height="18" backcolor="#9155FD" bold="true" vTextAlign="Middle">
                <text><![CDATA[Cod. :]]></text>
            </element>
            <element kind="textField" uuid="e70fe452-a24c-48ae-b1dc-0d0c4c334ca1" mode="Opaque" x="0" y="98" width="544"
                     height="21" backcolor="#75727C" bold="true" hTextAlign="Right" vTextAlign="Middle">
                <expression><![CDATA["Subtotal : " +  $P{CURRENCY}+" "+$F{subtotal}]]></expression>
            </element>
        </band>
    </detail>
    <lastPageFooter height="28">
        <element kind="textField" uuid="e9446fe9-dbed-4fff-b77b-d4d5de59bc68" mode="Opaque" x="0" y="3" width="544"
                 height="21" backcolor="#75727C" bold="true" hTextAlign="Right" vTextAlign="Middle">
            <expression><![CDATA["Total Amount : " +  $P{CURRENCY}+" "+$F{totalamount}]]></expression>
        </element>
    </lastPageFooter>
</jasperReport>
